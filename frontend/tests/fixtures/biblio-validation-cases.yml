cases:
# Fixtures pour BiblioValidationService.validateBiblio() - résultats end-to-end
# Format: input (author, title, publisher, episodeId) -> output (status, suggested_author, suggested_title, corrections)

# Cas verified - données exactes confirmées
- input:
    author: "Vamille"
    title: "Fleurs intestinales"
    publisher: "Sarbacane"
    episodeId: "68bd9ed3582cf994fb66f1d6"  # pragma: allowlist secret
  output:
    status: "verified"

# Cas suggestion - corrections proposées - mais il faut faire évoluer l'algo
- input:
    author: "Emmanuel Carrère"
    title: "Colcause"
    publisher: "POL"
    episodeId: "68bd9ed3582cf994fb66f1d6"  # pragma: allowlist secret
  output:
    status: "suggestion"
    suggested_author: "Emmanuel Carrère"
    suggested_title: "Kolkhoze"
    corrections:
      author: false
      title: true

# Cas Alain Mabancou --> Alain Mabanckou 14/09/2025
- input:
    author: "Alain Mabancou"
    title: "Ramsès de Paris"
    publisher: "Seuil"
    episodeId: "68c707ad6e51b9428ab87e9e"  # pragma: allowlist secret
  output:
    status: "suggestion"
    suggested_author: "Alain Mabanckou"
    suggested_title: "Ramsès de Paris"
    corrections:
      author: true
      title: false

# Caroline Dussain --> Caroline Du Saint
- input:
    author: "Caroline Dussain"
    title: "Un déni français"
    publisher: "Récamier"
    episodeId: "68c707ad6e51b9428ab87e9e"  # pragma: allowlist secret
  output:
    status: "suggestion"
    suggested_author: "Caroline du Saint"
    suggested_title: "Un Déni français - Enquête sur l'élevage industrie..."
    corrections:
      author: true
      title: true

# Séphora Pondi - 14/09/2025
- input:
    author: "Sephora Pondi"
    title: "Aval"
    publisher: "Grasset"
    episodeId: "68c707ad6e51b9428ab87e9e"  # pragma: allowlist secret
  output:
    status: "suggestion"
    suggested_author: "Séphora Pondi"
    suggested_title: "Avale"
    corrections:
      author: true
      title: true

##
# Les cas qui vont nécessiter un traitement manuel
##

# 07/09/2025 : Grégory Lefloc - Peau d'ours --> Grégory Le Floch - Peau d'ourse
- input:
    author: "Grégory Lefloc"
    title: "Peau d'ours"
    publisher: "Seuil"
    episodeId: "68bd9ed3582cf994fb66f1d6"  # pragma: allowlist secret
  output:
    status: "not_found"
  expected:
    status: "suggestion"
    suggested_author: "Grégory Le Floch"
    suggested_title: "Peau d'ourse"
    corrections:
      author: true
      title: true
  review:
    manual_review_required: true
    reason: "Inversion / segmentation du nom (Le Floch) et faute sur titre; nécessite intervention humaine"

# 14/09/2025 : Nin Antico - Une Obsession --> Nine Antico - Une obsession
- input:
    author: "Nin Antico"
    title: "Une Obsession"
    publisher: "Dargaud"
    episodeId: "68c707ad6e51b9428ab87e9e"  # pragma: allowlist secret
  output:
    status: "not_found"
  expected:
    status: "suggestion"
    suggested_author: "Nine Antico"
    suggested_title: "Une obsession"
    corrections:
      author: true
      title: true
  review:
    manual_review_required: true
    reason: "Prénom raccourci / oeuvre en coup de coeur (pas d'info fuzzy); nécessite intervention humaine"

# 14/09/2025 : Christophe Bigot - Un autre Matin ailleurs --> Christophe Bigot - Un autre m'attend ailleurs
- input:
    author: "Christophe Bigot"
    title: "Un autre Matin ailleurs"
    publisher: "Point"
    episodeId: "68c707ad6e51b9428ab87e9e"  # pragma: allowlist secret
  output:
    status: "not_found"
  expected:
    status: "suggestion"
    suggested_author: "Christophe Bigot"
    suggested_title: "Un autre m'attend ailleurs"
    corrections:
      author: false
      title: true
  review:
    manual_review_required: true
    reason: "Titre différent / segmentation problematique; nécessite revue humaine / ou l'approche recherche auteur biblio"

# 14/09/2025 : Agnès Michaud - Huitsemences vivantes --> Agnès Michaux - Huysmans vivant
- input:
    author: "Agnès Michaud"
    title: "Huitsemences vivantes"
    publisher: "Cherche Midi"
    episodeId: "68c707ad6e51b9428ab87e9e"  # pragma: allowlist secret
  output:
    status: "not_found"
  expected:
    status: "suggestion"
    suggested_author: "Agnès Michaux"
    suggested_title: "Huysmans vivant"
    corrections:
      author: true
      title: true
  review:
    manual_review_required: true
    reason: "nécessite revue humaine"
