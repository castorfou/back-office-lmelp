# ============================================================================
# Configuration Back-Office LMELP - Production
# ============================================================================
#
# Instructions :
# 1. Copier ce fichier vers .env
# 2. Adapter les valeurs selon votre environnement
# 3. Uploader .env dans Portainer lors du déploiement
#
# ============================================================================

# ============================================================================
# MONGODB (OBLIGATOIRE)
# ============================================================================

# Configuration selon votre environnement :

# Option 1 : NAS Synology avec MongoDB dans conteneur existant (RECOMMANDÉ)
MONGODB_URL=mongodb://mongo:27017/masque_et_la_plume # pragma: allowlist secret

# Option 2 : PC Linux avec MongoDB sur l'hôte
# MONGODB_URL=mongodb://172.17.0.1:27017/masque_et_la_plume # pragma: allowlist secret

# Option 3 : PC Mac/Windows avec MongoDB sur l'hôte
# MONGODB_URL=mongodb://host.docker.internal:27017/masque_et_la_plume # pragma: allowlist secret

# Option 4 : MongoDB distant
# MONGODB_URL=mongodb://<adresse-ip>:27017/masque_et_la_plume # pragma: allowlist secret

# Option 5 : MongoDB avec authentification
# MONGODB_URL=mongodb://username:password@mongo:27017/masque_et_la_plume # pragma: allowlist secret

# ============================================================================
# RÉSEAU DOCKER (OPTIONNEL)
# ============================================================================

# Réseau Docker où se trouve MongoDB
# Défaut : bridge (réseau par défaut Docker)
DOCKER_NETWORK=bridge

# Si MongoDB est sur un réseau Docker personnalisé, spécifier le nom :
# DOCKER_NETWORK=my-custom-network

# ============================================================================
# PORTS (OPTIONNEL)
# ============================================================================

# Port d'accès à l'application (frontend)
# Défaut : 8080
FRONTEND_PORT=8080

# Pour utiliser un autre port (ex: 3000) :
# FRONTEND_PORT=3000

# ============================================================================
# VARIABLES D'ENVIRONNEMENT BACKEND (OPTIONNEL)
# ============================================================================

# Environnement d'exécution
# ENVIRONMENT=production

# Hôte et port backend (ne pas modifier sauf besoin spécifique)
# API_HOST=0.0.0.0
# API_PORT=8000

# ============================================================================
# CALIBRE (OPTIONNEL)
# ============================================================================

# Chemin SUR L'HÔTE de votre bibliothèque Calibre
# Laisser vide ou commenter pour désactiver l'intégration Calibre
# Ce chemin sera monté en lecture seule dans le conteneur à /calibre

# Option 1 : NAS Synology
# CALIBRE_HOST_PATH=/volume1/books/Calibre Library

# Option 2 : Linux
# CALIBRE_HOST_PATH=/home/user/Calibre Library

# Option 3 : Mac
# CALIBRE_HOST_PATH=/Users/username/Calibre Library

# Option 4 : Windows (WSL2 ou Docker Desktop)
# CALIBRE_HOST_PATH=/mnt/c/Users/username/Calibre Library

# Tag de bibliothèque virtuelle Calibre (optionnel)
# Si votre bibliothèque Calibre utilise un tag pour filtrer les livres
# (ex: afficher uniquement les livres avec le tag "guillaume")
# CALIBRE_VIRTUAL_LIBRARY_TAG=guillaume

# EXEMPLE POUR ACTIVER CALIBRE :
# Décommenter et adapter le chemin selon votre système :
# CALIBRE_HOST_PATH=/volume1/books/Calibre Library
# CALIBRE_VIRTUAL_LIBRARY_TAG=guillaume

# Notes :
# - Le volume est monté en lecture seule (:ro) pour éviter toute modification
# - Dans le conteneur, Calibre sera toujours disponible à /calibre
# - Aucune installation de Calibre n'est nécessaire (lecture directe de metadata.db via SQLite)
# - Le tag de bibliothèque virtuelle permet de filtrer les livres affichés

# Anna's Archive (Issue #188)
# URL de base pour Anna's Archive (optionnel)
# Si non définie, le backend scrape Wikipedia pour récupérer l'URL actuelle
# Le service vérifie aussi que l'URL répond (health check avec timeout 2s)
# Exemples: https://fr.annas-archive.se, https://annas-archive.li
ANNAS_ARCHIVE_URL=https://fr.annas-archive.se

# ============================================================================
# NOTES
# ============================================================================
#
# - MongoDB doit être accessible AVANT de démarrer cette stack
# - Vérifier la connectivité : docker exec lmelp-backend curl http://mongo:27017
# - Pour rollback : modifier les tags d'images vers une version spécifique
#   Ex: ghcr.io/castorfou/lmelp-backend:v1.0.0
#
# Documentation complète :
# https://castorfou.github.io/back-office-lmelp/deployment/docker-setup/
#
# ============================================================================
